{"ast":null,"code":"import html2canvas from 'html2canvas';\nvar TOOLTIP_MARGIN = +window.getComputedStyle(document.querySelector(\".tooltip\")).margin.split(\"px\")[0];\nexport default {\n  data() {\n    return {\n      crossHairsLeft: 0,\n      crossHairsTop: 0,\n      startX: 0,\n      startY: 0,\n      isMouseDown: false,\n      isDraggingMouse: false\n    };\n  },\n\n  methods: {\n    move: function (event) {\n      var startY = this.startY,\n          startX = this.startX,\n          endX = event.clientX,\n          endY = event.clientY,\n          windowWidth = window.innerWidth,\n          windowHeight = window.innerHeight;\n      this.crossHairsTop = event.clientY;\n      this.crossHairsLeft = event.clientX;\n\n      if (this.isMouseDown) {\n        if (endX >= startX && endY >= startY) {\n          this.isDragging = true;\n          this.borderWidth = startY + \"px \" + (windowWidth - endX) + \"px \" + (windowHeight - endY) + \"px \" + startX + \"px\";\n        }\n      }\n    },\n    mouseDown: function (event) {\n      this.startX = event.clientX;\n      this.startY = event.clientY;\n      this.isMouseDown = true;\n    },\n    mouseUp: function () {\n      this.borderWidth = 0; // resetting the overlay\n\n      if (this.isDragging) {\n        // Don't take the screenshot unless the mouse moved somehow.\n        this.tookScreenShot = true;\n      }\n\n      this.isDragging = false;\n      this.mouseIsDown = false;\n      this.takeScreenshot();\n    },\n    takeScreenshot: function () {\n      html2canvas(document.querySelector('body')).then(canvas => {\n        let croppedCanvas = document.createElement('canvas'),\n            croppedCanvasContext = croppedCanvas.getContext('2d');\n        croppedCanvas.width = this.croppedImageWidth;\n        croppedCanvas.height = this.croppedImageHeight;\n        croppedCanvasContext.drawImage(canvas, this.startX, this.startY, this.croppedImageWidth, this.croppedImageHeight, 0, 0, this.croppedImageWidth, this.croppedImageHeight);\n        this.imageUrl = croppedCanvas.toDataURL();\n      });\n    }\n  },\n\n  mounted() {\n    let crosshairs = document.querySelector(\".crosshairs\");\n    let overlay = document.querySelector(\".overlay\");\n    let tooltip = document.querySelector(\".tooltip\");\n    var self = this;\n    this.windowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n    this.windowHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n    this.toolTipWidth = tooltip.getBoundingClientRect().width; // To recalculate the width and height if the screen size changes.\n\n    window.onresize = function () {\n      self.windowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n      self.windowHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n    };\n  }\n\n};","map":{"version":3,"mappings":"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","names":["html2canvas","TOOLTIP_MARGIN","window","getComputedStyle","document","querySelector","margin","split","data","crossHairsLeft","crossHairsTop","startX","startY","isMouseDown","isDraggingMouse","methods","move","event","endX","clientX","endY","clientY","windowWidth","innerWidth","windowHeight","innerHeight","isDragging","borderWidth","mouseDown","mouseUp","tookScreenShot","mouseIsDown","takeScreenshot","then","canvas","croppedCanvas","createElement","croppedCanvasContext","getContext","width","croppedImageWidth","height","croppedImageHeight","drawImage","imageUrl","toDataURL","mounted","crosshairs","overlay","tooltip","self","documentElement","clientWidth","body","clientHeight","toolTipWidth","getBoundingClientRect","onresize"],"sourceRoot":"","sources":["/home/misa/Coding/test-screenshot/test-screenshot/test-screenshot/src/components/screen-shot.vue"],"sourcesContent":["/* eslint-disable no-unused-vars */\n<template>\n  <div id=\"screenshot\" class=\"container\" @mousemove=\"move\" @mousedown=\"mouseDown\" @mouseup=\"mouseUp\">\n  <div class=\"overlay\" :class=\"{ 'highlighting' : isMouseDown }\" :style=\"{ borderWidth: borderWidth }\"></div>\n  <div class=\"crosshairs\" :class=\"{ 'hidden' : isDraggingMouse }\" :style=\"{ left: crossHairsLeft + 'px', top: crossHairsTop + 'px' }\"></div>\n</div>\n</template>\n\n<script>\nimport html2canvas from 'html2canvas'\n\nvar TOOLTIP_MARGIN = +window.getComputedStyle(document.querySelector(\".tooltip\")).margin.split(\"px\")[0];\nexport default {\n  data() { return {\n    crossHairsLeft: 0,\n    crossHairsTop: 0,\n    startX: 0,\n    startY: 0,\n    isMouseDown: false,\n    isDraggingMouse: false\n  }\n  },\n\n  methods: {\n\n    move: function (event) {\n             var startY       = this.startY,\n          startX       = this.startX,\n          endX         = event.clientX,\n          endY         = event.clientY,\n          windowWidth  = window.innerWidth,\n          windowHeight = window.innerHeight\n      this.crossHairsTop = event.clientY;\n      this.crossHairsLeft = event.clientX;\n            if (this.isMouseDown) {\n        if (endX >= startX && endY >= startY) {\n          this.isDragging = true;\n          this.borderWidth = startY + \"px \" + (windowWidth - endX) + \"px \" + (windowHeight - endY) + \"px \" + startX + \"px\";\n        }\n      }\n    },\n\n    mouseDown: function (event) {\n      this.startX = event.clientX;\n      this.startY = event.clientY;\n      this.isMouseDown = true;\n    },\n\n    mouseUp: function () {\n    this.borderWidth = 0; // resetting the overlay\n\n    if (this.isDragging) {\n      // Don't take the screenshot unless the mouse moved somehow.\n      this.tookScreenShot = true;\n    }\n\n    this.isDragging = false;\n    this.mouseIsDown = false;\n\n    this.takeScreenshot();\n\n    },\n\n    takeScreenshot: function () {\n    html2canvas(document.querySelector('body')).then(canvas => {\n      let croppedCanvas = document.createElement('canvas'),\n          croppedCanvasContext = croppedCanvas.getContext('2d');\n\n      croppedCanvas.width  = this.croppedImageWidth;\n      croppedCanvas.height = this.croppedImageHeight;\n\n      croppedCanvasContext.drawImage(canvas, this.startX, this.startY, this.croppedImageWidth, this.croppedImageHeight, 0, 0, this.croppedImageWidth, this.croppedImageHeight);\n\n      this.imageUrl = croppedCanvas.toDataURL();\n    });\n  }\n},\n  mounted() {\n    \n    let crosshairs = document.querySelector(\".crosshairs\");\n    let overlay = document.querySelector(\".overlay\");\n    let tooltip = document.querySelector(\".tooltip\");\n    \n    var self = this;\n    \n    this.windowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n    this.windowHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n    \n    this.toolTipWidth = tooltip.getBoundingClientRect().width;\n    \n    // To recalculate the width and height if the screen size changes.\n    window.onresize = function () {\n      self.windowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n      self.windowHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n    };\n    \n    \n    \n  },\n}\n\n</script>\n\n<style>\n\n</style>"]},"metadata":{},"sourceType":"module"}